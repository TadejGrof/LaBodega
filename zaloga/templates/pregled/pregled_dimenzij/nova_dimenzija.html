{% extends 'program/base.html' %}


{% load zaloga_exstras %}

{% block content %}
    <style>
        div.zaloga{
            margin-left:25%;
            width:50%;
            font-size:6vh;
            text-align:left;
            display:block;
        }
        div.zaloga input{
            width:10%;
        }
        div.zaloga_title{
            font-size:6vh
        }
        div.tipi{
            margin-left:100px;
            font-size:5vh;
        }
        div.ceniki{
            margin-left:100px;
            font-size:4vh;
        }
        div.tabela{
            display:block;
            width:30%;
            position:relative;
            left:35%;
            margin-top:4%;
            text-align:center
        }
    </style>
    <h1> {{slovar|keyvalue:'Nova dimenzija'|keyvalue:jezik}} </h1>
    <div class="tabela">
        <table style="font-size:4vh;width:100%">
            <tr>
                <td>{{slovar|keyvalue:'Dimenzija'|keyvalue:jezik}}:</td>
                <td><input form="nova_dimenzija" name="dimenzija" type="text" required autocomplete="off"></td>
            </tr>
            <tr>
                <td>{{slovar|keyvalue:'Radius'|keyvalue:jezik}}:</td>
                <td><input form="nova_dimenzija" name="radius" type="text" pattern="R[1-2]{1}[0-9]{1}" required autocomplete="off"></td>
            </tr>
            <tr>
                <td>{{slovar|keyvalue:'Width'|keyvalue:jezik}}:</td>
                <td><input form="nova_dimenzija" name="height" type="text" pattern="[1-3]{1}[0-9]{1}(0|5)" required autocomplete="off"></td>
            </tr>
            <tr>
                <td>{{slovar|keyvalue:'Height'|keyvalue:jezik}}:</td>
                <td><input form="nova_dimenzija" name="width" type="text" pattern="([1-9]{1}(0|5)C?|R)" required autocomplete="off"></td>
            </tr>
            <tr>
                <td>{{slovar|keyvalue:'Special'|keyvalue:jezik}}:</td>
                <td>
                    <select form="nova_dimenzija" name="special">
                        <option value="false" selected> None </option>
                        <option value="true"> C </option>
                    </select>
                </td>
            </tr>
        </table>
    </div>

    <h2> Izberi uporabnost: </h2>
    {% for zaloga in zaloge %}
        <div class="zaloga">
            <div>
                <input class="zaloga_checkbox inline" type="checkbox" name="zaloga_{{zaloga.id}}" form="nova_dimenzija" >
                <div class="zaloga_title inline"> {{zaloga.title}} </div> 
            </div>
            <div class="tipi skrit">
                {% for tip in zaloga.tipi_sestavin.all %}
                    <div style="display:block">
                        <input class="tip_checkbox inline" checked type="checkbox" name="{{zaloga.id}}_{{tip.id}}" form="nova_dimenzija">
                        <div class="tip_title inline"> {{tip.dolgo}} </div>
                    </div>
                    <div class="ceniki">
                        {% for cenik in zaloga.ceniki.all %}
                            <div class="cenik">
                                <div class="inline"> {{cenik.naziv}}: </div>
                                <input class="inline" type="number" step="0.01" min="0" form="nova_dimenzija" name="{{zaloga.id}}_{{tip.id}}_{{cenik.id}}">
                                <div class="inline"> $ </div>
                            </div>
                        {% endfor %}
                    </div>
                {% endfor %}
            </div>
        </div>
    {% endfor %}

    <div>
        <form id="nova_dimenzija" action="{% url 'nova_dimenzija' %}" method="POST">
            {% csrf_token %}
            <input style="margin-top:2%;display:inline-block;width:30%;height:10%;"type="submit" value="{{slovar|keyvalue:'Dodaj'|keyvalue:jezik}}">
        </form>
    </div>


<script>
    $(".zaloga_checkbox").change(function(){
        $('.tipi',this.parentElement.parentElement).toggle();
    })
    $(".tip_checkbox").change(function(){
        this.parentElement.nextElementSibling.classList.toggle("skrit");
    })
</script>
{% endblock %}
