{% extends 'program/base.html' %}

{% load zaloga_exstras %}

{% block content %}
    {% if perms.prodaja.add_stranka %}
    <div class="title" style="margin-top:2%;font-size:5vh">
        {{slovar|keyvalue:'Nova stranka'|keyvalue:jezik}}:
    </div>
    <div style="display:inline-block;width:70%;text-align:center;margin-top:2%">
        <table style="padding:1%;border:1px solid black" class="tabela_podatkov">
            <tr>
                <th width="33%" colspan="2"> {{slovar|keyvalue:'Osebni podatki'|keyvalue:jezik}}: </th>
                <th width="42%" colspan="2"> {{slovar|keyvalue:'Naslov'|keyvalue:jezik}}: </th>
                <th width="25%" colspan="2"> {{slovar|keyvalue:'Kontakt'|keyvalue:jezik}}: </th>
            </tr>
            <tr>
                <td> {{slovar|keyvalue:'Naziv'|keyvalue:jezik}}: </td>
                <td> <input form="nova_stranka" name="naziv" type="text" required autocomplete="off"> </td>
                <td> {{slovar|keyvalue:'Drzava'|keyvalue:jezik}}: </td>
                <td> <input form="nova_stranka" name="drzava" type="text" required autocomplete="off"> </td>
                <td> {{slovar|keyvalue:'Telefon'|keyvalue:jezik}}: </td>
                <td> <input form="nova_stranka" name="telefon" type="text" autocomplete="off"> </td>
            </tr>
            <tr>
                <td> {{slovar|keyvalue:'Ime'|keyvalue:jezik}}: </td>
                <td> <input form="nova_stranka" name="ime" type="text" required autocomplete="off"> </td>
                <td> {{slovar|keyvalue:'Mesto'|keyvalue:jezik}}: </td> 
                <td> <input form="nova_stranka" name="mesto" type="text" required autocomplete="off"> </td>
                <td> {{slovar|keyvalue:'E-mail'|keyvalue:jezik}}: </td>
                <td> <input form="nova_stranka" name="mail" type="text" autocomplete="off"> </td>
            </tr>
            <tr>
                <td> {{slovar|keyvalue:'Davcna'|keyvalue:jezik}}: </td>
                <td> <input form="nova_stranka" name="davcna" type="text" autocomplete="off"> </td>
                <td> {{slovar|keyvalue:'Ulica'|keyvalue:jezik}}: </td>
                <td> <input form="nova_stranka" name="naslov" type="text" required autocomplete="off"> </td>
            </tr>
        </table>
        <form id="nova_stranka" action="{% url 'nova_stranka' %}" method="POST">
            {% csrf_token %}
            <input type="submit" value="{{slovar|keyvalue:'Potrdi'|keyvalue:jezik}}">
        </form>
    </div>
    {% endif %}
    <h2>
        Obstojeƒçe stranke:
    </h2>


    <template id="header">
        <tr>
            <th width="15%"> {{slovar|keyvalue:'Naziv'|keyvalue:jezik}}: </th>
            <th width="23%"> {{slovar|keyvalue:'Ime'|keyvalue:jezik}}: </th>
            <th width="20%"> {{slovar|keyvalue:'Telefon'|keyvalue:jezik}}: </th>
            <th width="30%"> {{slovar|keyvalue:'E-mail'|keyvalue:jezik}}: </th>
            <th width="12%"> {{slovar|keyvalue:'Ogled'|keyvalue:jezik}}: </th>
        </tr>
    </template>

    <template id="stranka_row_model">
        <row-model-element style="display:table-row" className="Baza">
            <value-element attrName="title" class="table_cell"></value-element>
            <value-element attrName="datum" class="table_cell"></value-element>
            <value-element filter="prevzem" attrName="stevilka_kontejnerja" class="table_cell"></value-element>
            <value-element filter="prevzem" attrName="naziv_dobavitelja" class="table_cell"></value-element>
            <value-element filter="prevzem" attrName="prihod" class="table_cell"></value-element>
            <value-element filter="vele_prodaja" attrName="naziv_stranke" class="table_cell"></value-element>
            <value-element attrName="skupno_stevilo" class="table_cell"></value-element>
            <value-element filter="vele_prodaja" attrName="skupna_cena" type="price" class="table_cell"></value-element>
            <div class="table_cell">
                <button validate="true" is="delete-button"> Izbrisi </button>
            </div>
            <div class="table_cell">
                <button onclick="ogledAction(this)"> Ogled </button>
            </div>
        </row-model-element>
    </template>

    <models-table-element 
        rowModel="row_model" 
        class="stranke"
        header="header">
    </models-table-element>

    <div style="display:inline-block;width:70%;text-align:center">
        <table class="tabela_vnosov">
            <tr>
                <th width="15%"> {{slovar|keyvalue:'Naziv'|keyvalue:jezik}}: </th>
                <th width="23%"> {{slovar|keyvalue:'Ime'|keyvalue:jezik}}: </th>
                <th width="20%"> {{slovar|keyvalue:'Telefon'|keyvalue:jezik}}: </th>
                <th width="30%"> {{slovar|keyvalue:'E-mail'|keyvalue:jezik}}: </th>
                <th width="12%"> {{slovar|keyvalue:'Ogled'|keyvalue:jezik}}: </th>
            </tr>
            {% for stranka in stranke %}
                <tr>
                    <td> {{stranka.naziv}} </td>
                    <td> {{stranka.ime}} </td>
                    <td> {{stranka.telefon}} </td>
                    <td style="overflow:hidden"> {{stranka.mail}} </td>
                    <td>
                        <form action="{% url 'ogled_stranke' stranka.pk %}" method="GET">
                            <input type="submit" value="{{slovar|keyvalue:'Ogled'|keyvalue:jezik}}">
                        </form> 
                    </td>
                </tr>
            {% endfor %}
        </table>
    </div>
  
{% endblock %}