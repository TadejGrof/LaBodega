{% extends 'program/base.html' %}


{% load zaloga_exstras %}

{% block content %}

<style>
    .okence{
        width:80%
    }
</style>
{% if strosek == None %}
    <h2> Nov strosek </h2>
    <div style="margin:2%;display:inline-block;width:50%">
        <table class="tabela_podatkov" style="padding:2%;border: 1px solid black">
            <tr>
                <td width="15%"> Title: </td>
                <td width="35%"> <input class="okence" tpye="text" form="nov_strosek" name="title" autocomplete="off" required>
                <td width="15%"> Tip: </td>
                <td width="35%">
                    <select id="tip" onclick="Sprememba_tipa()" class="okence" name="tip" form="nov_strosek">
                        {% for tip in zaloga.tipi_stroskov %}
                            <option value="{{tip.0}}"> {{tip.1}} </option>
                        {% endfor %}
                    </select>
                </td>
            </tr>
            <tr>
                <td> Datum: </td>
                <td> <input type="date" class="okence" form="nov_strosek" name="datum" value="{{zaloga.danes}}">
                <td hidden="hidden" class="kontejner"> Kontejner: </td>
                <td hidden="hidden" class="kontejner">
                    <select id="kontejner" name="kontejner" form="nov_strosek">
                        {% for kontejner in kontejnerji %}
                            <option value="{{kontejner.pk}}"> {{kontejner.stevilka}} </option>
                        {% endfor %}
                    </select>
                </td>
            </tr>
        </table>
    </div>
    <form id="nov_strosek" action="{% url 'nov_strosek' %}" method="POST">
        {% csrf_token %}
        <input type="submit" value="Nov strosek">
    </form>
{% else %}
    <h2> Strosek </h2>
    <div style="width:60%;display:inline-block" class="table">
        <table class="tabela_vnosov">
            {% if strosek.tip == "kontejner" %}
                <tr>
                    <td> Kontejner </td>
                    <td> {{strosek.kontejner.stevilka}} </td>
                </tr>
            {% endif %}
            <tr class="header">
                <td> Tip: </td>
                <td> Znesek: </td>
                <td> Edit: </td>
            </tr>
            {% for vnos in vnosi %}
                <tr>
                    <td> {{vnos.tip}}
                    <td> {{vnos.znesek}}
                    <td> <button> E </button>
                </tr>
            {% endfor %}
            <tr class="nov_vnos_row" hidden="hidden">
                <td> 
                    <select name="tip" form="nov_vnos">
                        {% for tip in tipi %}
                            <option value="{{tip.0}}"> {{tip.1}} </option>
                        {% endfor %}
                    </select>
                </td>
                <td> <input type="text" name="znesek" form="nov_vnos" value="" autocomplete="off" required> $ </td>
                <td>
                    <form id="nov_vnos" action="Nov vnos" method="POST">
                        <input type="submit" value="POTRDI">
                    </form>
                </td>
            </tr>
            <tr>
                <td> Skupno: </td>
                <td> {{strosek.skupno}} </td>
                <td> <button onclick="Nov_vnos()"> Nov vnos </button> </td>
            </tr>
        </table>
    </div>
    <form style="margin-top:3%" action="{% url 'uveljavi_strosek' strosek.pk %}" method="POST">
        <input style="width:150px;height:40px" type="submit" value="Uveljavi">
    </form>

{% endif %}

<script>
    function Sprememba_tipa(){
        var tipbox = document.getElementById("tip");
        var tip = tipbox.options[tipbox.selectedIndex].value;
        if( tip == "kontejner"){
            toggle('kontejner','inline-block')
        }else{
            toggle('kontejner','none')
        }
    }
    function Nov_vnos(){
        toggle('nov_vnos_row','inline-block')
    }
</script>
{% endblock %}